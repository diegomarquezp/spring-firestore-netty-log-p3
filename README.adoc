# Firestore ResourceLeakDetector log reproducer
This repository attempts to reproduce the netty ResourceLeakDetector log:

```
LEAK:
ByteBuf.release() was not called before it's garbage-collected.
```

We achieve this by defining an Event entity with three fields:
- ID (String UUID)
- timeSent (Date)
- processedAt (Date)

A repository will define the autogenerated query:
`Flux<Event> findAllByTimeSentLessThanAndProcessedAtIsNull(Date timeSent);`

Then a service operates this repository and offers methods to reset, generate and fetch the entities using this query.

To confirm the behavior (does not log as expected), run the integration test making sure:
- spring.cloud.gcp.firestore.project-id is set in `src/main/resources/application.properties`
- You created an index for all three fields of Event.
You will be suggested to create this index when running the integration test for the first time.
